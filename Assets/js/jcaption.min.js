(function(e){e.fn.jcaption=function(t){t=e.extend({wrapperElement:"div",wrapperClass:"caption",captionElement:"p",imageAttr:"alt",requireText:true,copyStyle:false,removeStyle:true,removeAlign:true,copyAlignmentToClass:false,copyFloatToClass:true,autoWidth:true,animate:false,show:{opacity:"show"},showDuration:200,hide:{opacity:"hide"},hideDuration:200},t);return e(this).each(function(){e(this).bind("load",function(){if(e(this).data("loaded"))return false;e(this).data("loaded",true);var n=e(this);if(!t.requireText){n.wrap("<"+t.wrapperElement+" class='"+t.wrapperClass+"'></"+t.wrapperElement+">");var r=n.css("float");var i=n.attr("style");if(t.removeStyle)n.removeAttr("style");var s=n.attr("align");if(t.removeAlign)n.removeAttr("align");if(n.attr(t.imageAttr))var o=e(this).parent().append("<"+t.captionElement+">"+n.attr(t.imageAttr)+"</"+t.captionElement+">");else var o=e(this).parent().append("<"+t.captionElement+">"+""+"</"+t.captionElement+">");if(t.animate){e(this).next().hide();e(this).parent().hover(function(){e(this).find("p").animate(t.show,t.showDuration)},function(){e(this).find("p").animate(t.hide,t.hideDuration)})}if(t.copyStyle)o.attr("style",i);if(t.copyAlignmentToClass)o.addClass(s);if(t.copyFloatToClass)o.addClass(r);if(t.autoWidth)o.width(n.width())}});if(this.complete||this.naturalWidth>0){e(this).trigger("load")}})}})(jQuery)